postgresql:
  enabled: true
  image:
    repository: bitnamisecure/postgresql
    tag: latest

    #registry: docker.io
    #repository: postgres
    #tag: "16.4"
  auth:
    username: postgres
    database: getdonate
    password: postgres   # use a secret for prod
  primary:
    containerSecurityContext:
      enabled: true
      readOnlyRootFilesystem: true
    extraVolumes:
      - name: run-postgresql
        emptyDir: {}                 # or { medium: Memory } to use tmpfs
    extraVolumeMounts:
      - name: run-postgresql
        mountPath: /var/run/postgresql
    persistence:
      enabled: true
      size: 8Gi

# Storage - MinIO (S3-compatible object storage)
storage:
  minio:
    enabled: true
    replicaCount: 1

    image:
      repository: minio/minio
      tag: "latest"
      pullPolicy: IfNotPresent

    service:
      type: ClusterIP
      port: 9000
      consolePort: 9001

    ingress:
      enabled: true  # Enable console ingress
      apiEnabled: true  # Enable API ingress for media file serving
      className: "nginx"
      annotations: {}
      hosts:
        - host: storage-console-test.lend-a-hand.me
        - host: storage-test.lend-a-hand.me
      tls: true
      tlsClusterIssuer: "letsencrypt-prod"  # Optional: override default ClusterIssuer

    auth:
      rootUser: "minioadmin"
      rootPassword: "minioadmin"  # Change in production!

    persistence:
      enabled: true
      size: 10Gi
      accessMode: ReadWriteOnce
      storageClass: ""  # Use default storage class

    resources:
      limits:
        cpu: 500m
        memory: 512Mi
      requests:
        cpu: 100m
        memory: 128Mi

    nodeSelector: {}
    tolerations: []
    affinity: {}
