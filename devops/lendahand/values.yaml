# Default values for lendahand
global:
  imageRegistry: "us-central1-docker.pkg.dev/test-donate-472114/donatereg/"
  imagePullSecrets: []
  storageClass: ""

# Backend Django service
backend:
  enabled: true
  replicaCount: 1

  image:
    repository: backend
    tag: 98da23a27778a9c272e6d54b8ac87096659e440d
    pullPolicy: IfNotPresent

  imagePullSecrets: []

  service:
    type: ClusterIP
    port: 8000
    annotations: {}

  ingress:
    enabled: true
    className: "nginx"
    annotations: {}
    hosts:
      - host: api-test.lendahand.me
        paths:
          - path: /
            pathType: Prefix
    tls: []

  env:
    DEBUG: "True"
    DJANGO_SECRET_KEY: "change-me-in-production"
    DATABASE_URL: "postgresql://postgres:postgres@infra-postgresql:5432/getdonate"
    STRIPE_SECRET_KEY: ""
    STRIPE_PUBLISHABLE_KEY: ""
    STRIPE_WEBHOOK_SECRET: ""
    ALLOWED_HOSTS: "*"
    # MinIO/S3 Storage Configuration
    USE_S3_STORAGE: "True"
    # MinIO service URL - will be set in deployment template
    AWS_ACCESS_KEY_ID: "minioadmin"  # Should match storage.minio.auth.rootUser
    AWS_SECRET_ACCESS_KEY: "minioadmin"  # Should match storage.minio.auth.rootPassword
    AWS_STORAGE_BUCKET_NAME: "lendahand-media"
    AWS_S3_USE_SSL: "False"

  envFrom: []

#  resources:
#    limits:
#      cpu: 1000m
#      memory: 1Gi
#    requests:
#      cpu: 500m
#      memory: 512Mi

  livenessProbe:
    httpGet:
      path: /api/health/
      port: http
    initialDelaySeconds: 30
    periodSeconds: 10

  readinessProbe:
    httpGet:
      path: /api/health/
      port: http
    initialDelaySeconds: 10
    periodSeconds: 5

  nodeSelector: {}
  tolerations: []
  affinity: {}

# Frontend React service
frontend:
  enabled: true
  replicaCount: 1

  image:
    repository: frontend
    tag: 98da23a27778a9c272e6d54b8ac87096659e440d
    pullPolicy: IfNotPresent

  imagePullSecrets: []

  service:
    type: ClusterIP
    port: 80
    annotations: {}

  ingress:
    enabled: true
    className: "nginx"
    annotations: {}
    hosts:
      - host: test.lendahand.me
        paths:
          - path: /
            pathType: Prefix
    tls: []

  env:
    REACT_APP_API_URL: "http://api-test.lendahand.me"

  envFrom: []

  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi

  livenessProbe:
    httpGet:
      path: /
      port: http
    initialDelaySeconds: 30
    periodSeconds: 10

  readinessProbe:
    httpGet:
      path: /
      port: http
    initialDelaySeconds: 10
    periodSeconds: 5

  nodeSelector: {}
  tolerations: []
  affinity: {}

# Storage - MinIO (S3-compatible object storage)
storage:
  minio:
    enabled: true
    replicaCount: 1

    image:
      repository: minio/minio
      tag: "latest"
      pullPolicy: IfNotPresent

    service:
      type: ClusterIP
      port: 9000
      consolePort: 9001

    auth:
      rootUser: "minioadmin"
      rootPassword: "minioadmin"  # Change in production!

    persistence:
      enabled: true
      size: 10Gi
      accessMode: ReadWriteOnce
      storageClass: ""  # Use default storage class

    resources:
      limits:
        cpu: 500m
        memory: 512Mi
      requests:
        cpu: 100m
        memory: 128Mi

    livenessProbe:
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5

    readinessProbe:
      initialDelaySeconds: 10
      periodSeconds: 5
      timeoutSeconds: 5

    nodeSelector: {}
    tolerations: []
    affinity: {}

ingress:
  enabled: true
  className: "nginx"
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
  tls:
    enabled: true
