# Default values for lendahand
global:
  imageRegistry: "us-central1-docker.pkg.dev/test-donate-472114/donatereg/"
  imagePullSecrets: []
  storageClass: ""

# Backend Django service
backend:
  enabled: true
  replicaCount: 1

  image:
    repository: backend
    tag: 98da23a27778a9c272e6d54b8ac87096659e440d
    pullPolicy: IfNotPresent

  imagePullSecrets: []

  service:
    type: ClusterIP
    port: 8000
    annotations: {}

  ingress:
    enabled: true
    className: "nginx"
    annotations: {}
    hosts:
      - host: api-test.lendahand.me
        paths:
          - path: /
            pathType: Prefix
    tls: []

  env:
    DEBUG: "True"
    DJANGO_SECRET_KEY: "change-me-in-production"
    DATABASE_URL: "postgresql://postgres:postgres@infra-postgresql:5432/getdonate"
    STRIPE_SECRET_KEY: ""
    STRIPE_PUBLISHABLE_KEY: ""
    STRIPE_WEBHOOK_SECRET: ""
    FRONTEND_URL: "http://test.lendahand.me"  # Frontend URL for Stripe redirects
    ALLOWED_HOSTS: "*"
    # MinIO/S3 Storage Configuration
    # MinIO is managed by the infra chart - service name: infra-minio
    USE_S3_STORAGE: "True"
    AWS_STORAGE_BUCKET_NAME: "lendahand-media"
    AWS_S3_USE_SSL: "False"

  envFrom: []

#  resources:
#    limits:
#      cpu: 1000m
#      memory: 1Gi
#    requests:
#      cpu: 500m
#      memory: 512Mi

  nodeSelector: {}
  tolerations: []
  affinity: {}

# Frontend React service
frontend:
  enabled: true
  replicaCount: 1

  image:
    repository: frontend
    tag: 98da23a27778a9c272e6d54b8ac87096659e440d
    pullPolicy: IfNotPresent

  imagePullSecrets: []

  service:
    type: ClusterIP
    port: 80
    annotations: {}

  ingress:
    enabled: true
    className: "nginx"
    annotations: {}
    hosts:
      - host: test.lendahand.me
        paths:
          - path: /
            pathType: Prefix
    tls: []

  env:
    REACT_APP_API_URL: "http://api-test.lendahand.me/api"

  envFrom: []

  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi

  nodeSelector: {}
  tolerations: []
  affinity: {}

# Storage - MinIO is now managed by the infra chart
# Configure MinIO via devops/infra/values.yaml
storage:
  minio:
    enabled: true  # Set to true to enable MinIO integration in backend deployment

ingress:
  enabled: true
  className: "nginx"
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
  tls:
    enabled: true
